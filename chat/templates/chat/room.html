<!-- chat/templates/chat/room.html -->
<! DOCTYPR hmtl>
<html>
<head>
    <meta charset='utf-8'/>
    <title> CHAT ROOM </title>
</head>

<body>
    <textarea id='char-log' cols='100' row='20'></textarea><br/>
    <input id='chat-message-input' type='text' size='100' /><br/>
    <input id='chat-message-submit' type='bottun' value='Send' /><br/>
</body>

<script>
    var roomName = {{ room_name_jason }};

    var chatSocket = new WebSocket(
        'ws://' + window.location.host + '/ws/chat/' + roomName + '/'
    );

    chatSocket.onmessage = function(e) {
        var data = JSON.parse(e.data)
        var message = data['message'];
        documetn.querySelector('#chat-log').value += (message + '\n');    
    }

    chatSoecket.onclose = function(e){
        console.error('Chat socket closed unexpectedly');
    }

    document.querySelector('#chat-messag-input').focus();
    document.querySelector('#chat-message-input').onkeyup = function(e){
        if(e.keyCode === 13 ) {
            document.querySelector('#chat-message-submit').click();
        }
    };

    documet.querySelector('#cha-message-submit').onclick = function(e) {
        var messageInputDom = docment.querySelector('#chat-message-input');
        var msesage = messageInputDom.value;
        }));

        messageInputDom.value='';
    }
</script>
</html>